<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Legacy Of The Triple A - 대괴도 AAA의 유산 v0.1</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link
        href="https://fonts.googleapis.com/css2?family=Noto+Serif+KR:wght@400;700&family=Cinzel:wght@400;700&family=Nanum+Myeongjo:wght@400;700&display=swap"
        rel="stylesheet">
    <style>
        :root {
            --primary-red: #b91c1c;
            --overlay-dark: rgba(0, 0, 0, 0.85);
        }

        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
            font-family: 'Noto Serif KR', 'Nanum Myeongjo', serif;
            color: #fff;
            user-select: none;
            -webkit-tap-highlight-color: transparent;
        }

        .font-cinzel {
            font-family: 'Cinzel', serif;
        }

        /* Animations */
        .fade-in {
            animation: fadeIn 1.5s ease-out forwards;
        }

        .fade-out {
            animation: fadeOut 1.2s ease-in forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        @keyframes fadeOut {
            from {
                opacity: 1;
            }

            to {
                opacity: 0;
            }
        }

        /* UI Elements */
        .menu-btn {
            position: relative;
            padding: 1rem 2.5rem;
            font-size: 1.25rem;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            text-align: left;
            border-left: 0px solid var(--primary-red);
            overflow: hidden;
        }

        .menu-btn.active {
            background: linear-gradient(90deg, rgba(185, 28, 28, 0.2) 0%, transparent 100%);
            border-left-width: 6px;
            padding-left: 3.5rem;
            color: #fff;
            text-shadow: 0 0 10px rgba(185, 28, 28, 0.5);
        }

        .menu-btn::before {
            content: '';
            position: absolute;
            bottom: 0;
            left: 0;
            width: 0%;
            height: 1px;
            background-color: rgba(255, 255, 255, 0.2);
            transition: width 0.3s ease;
        }

        .menu-btn:hover::before {
            width: 100%;
        }

        .textbox-gradient {
            background: linear-gradient(to bottom, rgba(0, 0, 0, 0.9), rgba(0, 0, 0, 0.8));
            box-shadow: 0 -10px 30px rgba(0, 0, 0, 0.5);
        }

        .typewriter-cursor::after {
            content: '▼';
            margin-left: 8px;
            color: var(--primary-red);
            animation: blink 0.8s infinite;
        }

        @keyframes blink {

            0%,
            100% {
                opacity: 1;
            }

            50% {
                opacity: 0;
            }
        }

        /* Custom Range Slider Styling */
        input[type=range] {
            -webkit-appearance: none;
            appearance: none;
            background: transparent;
        }

        input[type=range]::-webkit-slider-runnable-track {
            width: 100%;
            height: 4px;
            background: #333;
            border-radius: 2px;
        }

        input[type=range]::-webkit-slider-thumb {
            -webkit-appearance: none;
            height: 16px;
            width: 16px;
            border-radius: 50%;
            background: var(--primary-red);
            margin-top: -6px;
            cursor: pointer;
            box-shadow: 0 0 10px rgba(185, 28, 28, 0.5);
        }

        /* Cinematic Effects */
        .bg-transition {
            transition: background-image 1.5s ease-in-out;
        }

        .crt-effect {
            background: linear-gradient(rgba(18, 16, 16, 0) 50%, rgba(0, 0, 0, 0.25) 50%), linear-gradient(90deg, rgba(255, 0, 0, 0.06), rgba(0, 255, 0, 0.02), rgba(0, 0, 255, 0.06));
            background-size: 100% 2px, 3px 100%;
            pointer-events: none;
        }

        .terminal-text {
            color: #0f0;
            text-shadow: 0 0 5px #0f0;
            font-family: 'Courier New', Courier, monospace;
        }

        @keyframes scanline {
            0% {
                transform: translateY(-100%);
            }

            100% {
                transform: translateY(100%);
            }
        }

        .scanline {
            width: 100%;
            height: 100px;
            z-index: 100;
            background: linear-gradient(0deg, rgba(0, 0, 0, 0) 0%, rgba(255, 255, 255, 0.2) 50%, rgba(0, 0, 0, 0) 100%);
            opacity: 0.1;
            position: absolute;
            bottom: 100%;
            animation: scanline 8s linear infinite;
        }

        .animate-shake {
            animation: shake 0.5s cubic-bezier(.36, .07, .19, .97) both;
        }

        @keyframes shake {

            10%,
            90% {
                transform: translate3d(-1px, 0, 0);
            }

            20%,
            80% {
                transform: translate3d(2px, 0, 0);
            }

            30%,
            50%,
            70% {
                transform: translate3d(-4px, 0, 0);
            }

            40%,
            60% {
                transform: translate3d(4px, 0, 0);
            }
        }

        .custom-scrollbar::-webkit-scrollbar {
            width: 4px;
        }

        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #444;
            border-radius: 10px;
        }

        .custom-scrollbar::-webkit-scrollbar-track {
            background: transparent;
        }
    </style>
    <style>
        /* [Existing Styles Kept for Brevity in this thought, but will be in the actual replacement] */
    </style>
</head>

<body>
    <div id="game-container" class="w-full h-screen relative overflow-hidden bg-black">
        <!-- Screens will be injected here -->
    </div>

    <script>
        async function loadGameTables() {
            try {
                const [locRes, playRes] = await Promise.all([
                    fetch('assets/Table/LOCALIZATION.JSON'),
                    fetch('assets/Table/PLAY.JSON')
                ]);

                if (!locRes.ok || !playRes.ok) throw new Error("Could not find table files.");
                State.localization = await locRes.json();
                State.events = await playRes.json();
                return true;
            } catch (err) {
                console.error("Load Error:", err);
                return false;
            }
        }
        const State = {
            screen: 'LOADING',
            language: 'KO',
            menuIndex: 0,
            currentEventIndex: 0,
            events: [],
            localization: {},
            startTime: 0,
            isTextAnimating: false,
            history: [],
            scores: JSON.parse(localStorage.getItem('aaa_scores') || '[]'),
            settings: {
                masterVol: 80, bgmVol: 60, sfxVol: 70, voiceVol: 80, mute: false,
                lang: 'KO', textSpeed: 0.8, autoWait: 2000,
                opacity: 0.85, fontSize: 32, font: 'Noto Serif KR', outline: true
            },
            currentView: {
                background: '',
                characters: {}, // { id: position }
                name: '',
                dialogue: '',
                quiz: null
            },
            audio: {
                bgm: null,
                sfx: new Audio()
            }
        };

        const container = document.getElementById('game-container');

        // Audio Controller
        const AudioManager = {
            playBGM: (url) => {
                if (State.audio.bgm) {
                    State.audio.bgm.pause();
                }
                State.audio.bgm = new Audio(url);
                State.audio.bgm.loop = true;
                State.audio.bgm.volume = (State.settings.bgmVol / 100) * (State.settings.masterVol / 100);
                State.audio.bgm.play().catch(() => console.log("User interaction required for audio"));
            },
            playSFX: (url) => {
                const sfx = new Audio(url);
                sfx.volume = (State.settings.sfxVol / 100) * (State.settings.masterVol / 100);
                sfx.play().catch(() => { });
            }
        };

        async function initGame() {
            if (window.location.protocol === 'file:') {
                alert("Security Note: Some browsers block external data loading when opened as a local file (file://).\n\nIf the game shows a black screen, please use a local web server (like VS Code Live Server) or use Firefox.");
            }

            render(); // Show initial loading screen
            const success = await loadGameTables();

            if (!success) {
                State.screen = 'LOAD_ERROR';
                render();
                return;
            }

            const browserLang = navigator.language.split('-')[0].toUpperCase();
            const supportedLangs = ['KO', 'EN', 'JP', 'CN_S', 'CN_T', 'ES'];
            if (supportedLangs.includes(browserLang)) State.language = browserLang;

            State.screen = 'DISCLAIMER';
            render();
            window.addEventListener('resize', handleResize);
            handleResize();
        }

        // [Rest of the functions remain the same: handleResize, t, navigate, processNextEvent, render, renderDisclaimer, renderMenu, renderMenuButtons, renderGame, showQuizOverlay, handleGameEnd, renderOptions, renderScore, renderCredits, renderExitConfirm]

        // ... (I will keep the rest of the engine here in the actual file)

        function handleResize() {
            const targetWidth = 1920;
            const targetHeight = 1080;
            const scaleX = window.innerWidth / targetWidth;
            const scaleY = window.innerHeight / targetHeight;
            const scale = Math.min(scaleX, scaleY);

            const gameArea = document.getElementById('game-area');
            if (gameArea) {
                gameArea.style.transform = `scale(${scale})`;
                gameArea.style.left = `${(window.innerWidth - targetWidth * scale) / 2}px`;
                gameArea.style.top = `${(window.innerHeight - targetHeight * scale) / 2}px`;
            }
        }

        function t(key) {
            if (!State.localization || !State.localization[key]) return key;
            const entry = State.localization[key];
            return entry[State.language] || entry['EN'] || key;
        }

        function navigate(screen) {
            State.screen = screen;
            if (screen === 'GAME') {
                State.currentEventIndex = 0;
                State.history = [];
                State.startTime = Date.now();
                State.currentView.characters = {};
                processNextEvent();
            }
            render();
        }

        function processNextEvent() {
            if (State.currentEventIndex >= State.events.length) return;

            const event = State.events[State.currentEventIndex];
            State.currentEventIndex++;

            switch (event.type) {
                case 'DIALOGUE':
                    State.currentView.name = event.target || '';
                    State.currentView.dialogue = t(event.value);
                    State.currentView.quiz = null;
                    render();
                    break;
                case 'BG_CHANGE':
                    State.currentView.background = event.value;
                    render();
                    processNextEvent();
                    break;
                case 'CHAR_ENTER':
                    State.currentView.characters[event.target] = event.value || 'center';
                    render();
                    processNextEvent();
                    break;
                case 'CHAR_EXIT':
                    delete State.currentView.characters[event.target];
                    render();
                    processNextEvent();
                    break;
                case 'BGM_PLAY':
                    AudioManager.playBGM(event.value);
                    processNextEvent();
                    break;
                case 'SFX_PLAY':
                    AudioManager.playSFX(event.value);
                    processNextEvent();
                    break;
                case 'WAIT':
                    setTimeout(processNextEvent, (event.value || 1) * 1000);
                    break;
                case 'QUIZ':
                    State.currentView.quiz = event;
                    render();
                    break;
                case 'GAME_END':
                    handleGameEnd(event.value);
                    break;
            }
        }

        function render() {
            container.innerHTML = '';
            const area = document.createElement('div');
            area.id = 'game-area';
            area.className = 'absolute w-[1920px] h-[1080px] origin-top-left overflow-hidden bg-black shadow-2xl';
            container.appendChild(area);

            switch (State.screen) {
                case 'LOADING': renderLoading(area); break;
                case 'LOAD_ERROR': renderLoadError(area); break;
                case 'DISCLAIMER': renderDisclaimer(area); break;
                case 'MENU': renderMenu(area); break;
                case 'GAME': renderGame(area); break;
                case 'OPTIONS': renderOptions(area); break;
                case 'SCORE': renderScore(area); break;
                case 'CREDITS': renderCredits(area); break;
                case 'EXIT_CONFIRM': renderExitConfirm(area); break;
            }
            handleResize();
        }

        function renderLoading(parent) {
            parent.innerHTML = `
                <div class="flex flex-col items-center justify-center h-full space-y-8">
                    <div class="w-24 h-24 border-t-4 border-red-700 border-solid rounded-full animate-spin"></div>
                    <div class="text-3xl font-cinzel text-white tracking-[0.5em] animate-pulse">LOADING ASSETS</div>
                </div>
            `;
        }

        function renderLoadError(parent) {
            parent.innerHTML = `
                <div class="flex flex-col items-center justify-center h-full space-y-12 text-center p-20">
                    <div class="text-9xl text-red-900 mb-8">⚠</div>
                    <div class="text-6xl font-cinzel text-white uppercase tracking-widest">Initialization Failed</div>
                    <p class="text-3xl text-neutral-500 font-serif max-w-[1200px] leading-relaxed">
                        The game could not load scenario or localization data.<br>
                        This is usually caused by CORS security policies when opening index.html directly from a file folder.
                    </p>
                    <div class="mt-20 p-10 border border-red-900/30 bg-red-900/10 text-2xl text-red-400 font-mono">
                        Recommendation: Use a local web server (Live Server) or host it on GitHub Pages.
                    </div>
                </div>
            `;
        }

        function renderDisclaimer(parent) {
            const el = document.createElement('div');
            el.className = 'flex items-center justify-center h-full p-40 fade-in text-center';
            el.innerHTML = `<p class="text-5xl text-neutral-400 italic font-serif leading-loose">${t('DISCLAIMER')}</p>`;
            parent.appendChild(el);
            setTimeout(() => {
                el.classList.replace('fade-in', 'fade-out');
                setTimeout(() => navigate('MENU'), 1200);
            }, 5000);
        }

        function renderMenu(parent) {
            const menuItems = [
                { id: 'GAME', key: 'START_GAME' },
                { id: 'OPTIONS', key: 'OPTIONS' },
                { id: 'SCORE', key: 'SCORE' },
                { id: 'CREDITS', key: 'CREDITS' },
                { id: 'EXIT_CONFIRM', key: 'EXIT' }
            ];

            parent.innerHTML = `
                <div class="absolute inset-0 opacity-30 bg-cover bg-center bg-[url('https://images.unsplash.com/photo-1582555172866-f73bb12a2ab3?q=80&w=1920')]"></div>
                <div class="relative z-10 h-full flex flex-col items-center justify-center">
                    <div class="mb-40 fade-in text-center">
                        <h1 class="font-cinzel text-[10rem] text-white tracking-tighter uppercase drop-shadow-[0_0_50px_rgba(185,28,28,0.6)]">The Triple A</h1>
                        <div class="flex items-center justify-center mt-8 space-x-16">
                            <div class="h-px bg-red-800 w-48 opacity-50"></div>
                            <p class="font-cinzel text-5xl text-red-700 tracking-[0.6em] font-bold">대괴도 AAA의 유산</p>
                            <div class="h-px bg-red-800 w-48 opacity-50"></div>
                        </div>
                    </div>
                    <div id="menu-list" class="flex flex-col w-[700px] space-y-4"></div>
                    <div class="absolute bottom-20 text-neutral-600 text-xl tracking-[1em] uppercase font-cinzel opacity-40">SELECT YOUR DESTINY</div>
                </div>
            `;

            const list = parent.querySelector('#menu-list');
            menuItems.forEach((item, idx) => {
                const btn = document.createElement('button');
                btn.className = `menu-btn font-cinzel text-4xl tracking-widest uppercase py-8 ${State.menuIndex === idx ? 'active' : 'text-neutral-500 hover:text-white'}`;
                btn.innerText = t(item.key);
                btn.onmouseenter = () => { State.menuIndex = idx; renderMenuButtons(); };
                btn.onclick = () => navigate(item.id);
                list.appendChild(btn);
            });
        }

        function renderMenuButtons() {
            const btns = document.querySelectorAll('.menu-btn');
            btns.forEach((btn, idx) => {
                if (idx === State.menuIndex) btn.classList.add('active');
                else btn.classList.remove('active');
            });
        }

        function renderGame(parent) {
            const view = State.currentView;
            parent.innerHTML = `
                <div id="bg-layer" class="absolute inset-0 bg-cover bg-center transition-all duration-1000 bg-transition" style="background-image: url('${view.background}')"></div>
                <div class="absolute inset-0 bg-black/40 z-10"></div>
                <div id="character-layer" class="absolute inset-0 z-20 flex justify-center items-end px-32 pointer-events-none pb-20"></div>
                <div class="absolute top-0 left-0 w-full z-40 p-16 flex justify-between items-center bg-gradient-to-b from-black/80 to-transparent">
                    <button id="btn-menu" class="px-12 py-4 bg-black/40 border border-white/10 rounded-full font-cinzel text-lg tracking-widest hover:bg-white/10 transition-all uppercase">Escape to Menu</button>
                    <div class="flex space-x-8">
                        <div class="text-neutral-500 font-cinzel border-l border-white/20 pl-8 h-8 flex items-center text-xl uppercase tracking-widest">Chapter 01: The Legacy</div>
                    </div>
                </div>
                <div class="absolute bottom-0 left-0 w-full z-30 p-20 cursor-pointer" id="game-click-area">
                    <div class="w-full max-w-[1600px] mx-auto rounded-[3rem] border border-white/10 p-16 textbox-gradient min-h-[350px]" style="background-color: rgba(0,0,0,${State.settings.opacity})">
                        <div id="name-box" class="text-red-700 mb-8 font-bold font-cinzel text-4xl tracking-[0.4em] border-l-8 border-red-900 pl-8 min-h-[1.5em]">
                            ${view.name ? t(view.name) : ''}
                        </div>
                        <div id="text-box" class="leading-relaxed text-neutral-100 italic font-serif" style="font-size: ${State.settings.fontSize}px; line-height: 1.6;"></div>
                    </div>
                </div>
                <div id="quiz-overlay" class="absolute inset-0 z-50 flex items-center justify-center bg-black/80 backdrop-blur-sm hidden">
                    <div class="w-[1200px] bg-neutral-950 border border-green-900/50 rounded-2xl overflow-hidden relative shadow-[0_0_100px_rgba(34,197,94,0.1)]">
                        <div class="bg-neutral-900 px-8 py-4 flex justify-between items-center border-b border-white/5">
                            <div class="flex space-x-2">
                                <div class="w-3 h-3 rounded-full bg-red-500/50"></div>
                                <div class="w-3 h-3 rounded-full bg-yellow-500/50"></div>
                                <div class="w-3 h-3 rounded-full bg-green-500/50"></div>
                            </div>
                            <div class="text-xs font-mono text-neutral-600 tracking-widest">TRIPLE-A SYSTEM OVERRIDE</div>
                        </div>
                        <div class="p-20 relative overflow-hidden">
                            <div class="absolute inset-0 crt-effect"></div>
                            <div class="scanline"></div>
                            <div class="relative z-10">
                                <div class="mb-12 terminal-text text-xl opacity-60 font-mono">> ACCESSING SECURE NODE...</div>
                                <div id="quiz-question" class="terminal-text text-4xl mb-16 leading-relaxed"></div>
                                <div class="flex border-2 border-green-900/30 p-4 bg-black/40">
                                    <span class="terminal-text text-4xl mr-6">></span>
                                    <input type="text" id="quiz-input" autocomplete="off" class="flex-1 bg-transparent terminal-text text-4xl outline-none placeholder:opacity-20 uppercase tracking-widest" placeholder="...">
                                </div>
                                <div class="mt-12 flex justify-between items-end">
                                    <div class="terminal-text text-lg opacity-40 italic" id="quiz-hint"></div>
                                    <button id="quiz-submit" class="border border-green-900/50 hover:bg-green-900/10 px-16 py-6 terminal-text text-2xl tracking-[0.5em] transition-all">EXECUTE</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            `;

            const charLayer = parent.querySelector('#character-layer');
            Object.entries(view.characters).forEach(([id, pos]) => {
                const img = document.createElement('img');
                // Character mapping
                const seed = id === 'AAA' ? 'TreasureHunter' : (id === '알루카드' ? 'ButlerA' : id);
                img.src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${seed}`;
                img.className = `h-[900px] object-contain drop-shadow-[0_50px_100px_rgba(0,0,0,0.95)] transition-all duration-1000 animate-fadeIn`;
                if (pos === 'left') img.style.marginRight = 'auto';
                else if (pos === 'right') img.style.marginLeft = 'auto';
                charLayer.appendChild(img);
            });

            const textBox = parent.querySelector('#text-box');
            parent.querySelector('#btn-menu').onclick = (e) => { e.stopPropagation(); navigate('MENU'); };

            if (view.dialogue) {
                let i = 0;
                State.isTextAnimating = true;
                textBox.innerText = '';
                const speed = 100 - (State.settings.textSpeed * 90);
                const timer = setInterval(() => {
                    textBox.innerText += view.dialogue[i++];
                    if (i >= view.dialogue.length) {
                        clearInterval(timer);
                        State.isTextAnimating = false;
                        textBox.classList.add('typewriter-cursor');
                        if (view.quiz) showQuizOverlay(parent, view.quiz);
                    }
                }, speed);

                parent.querySelector('#game-click-area').onclick = () => {
                    if (State.isTextAnimating) {
                        clearInterval(timer);
                        textBox.innerText = view.dialogue;
                        State.isTextAnimating = false;
                        textBox.classList.add('typewriter-cursor');
                        if (view.quiz) showQuizOverlay(parent, view.quiz);
                    } else if (!view.quiz) {
                        processNextEvent();
                    }
                };
            }
        }

        function showQuizOverlay(parent, event) {
            const overlay = parent.querySelector('#quiz-overlay');
            const qText = parent.querySelector('#quiz-question');
            const hText = parent.querySelector('#quiz-hint');
            const input = parent.querySelector('#quiz-input');
            const submitBtn = parent.querySelector('#quiz-submit');

            overlay.classList.remove('hidden');
            qText.innerText = event.options.question;
            hText.innerText = `HINT: ${event.options.hint}`;

            input.focus();
            const submit = () => {
                const answers = Array.isArray(event.value) ? event.value : [event.value];
                const inputVal = input.value.trim().toLowerCase().replace(/\s+/g, '');
                const isCorrect = answers.some(ans => {
                    const normalizedAns = String(ans).trim().toLowerCase().replace(/\s+/g, '');
                    return inputVal === normalizedAns;
                });

                if (isCorrect) {
                    overlay.classList.add('fade-out');
                    setTimeout(() => {
                        overlay.classList.add('hidden');
                        overlay.classList.remove('fade-out');
                        processNextEvent();
                    }, 1000);
                } else {
                    overlay.querySelector('.w-[1200px]').classList.add('animate-shake');
                    setTimeout(() => overlay.querySelector('.w-[1200px]').classList.remove('animate-shake'), 500);
                    input.value = '';
                }
            };

            submitBtn.onclick = (e) => { e.stopPropagation(); submit(); };
            input.onkeydown = (e) => { e.stopPropagation(); if (e.key === 'Enter') submit(); };
        }

        function handleGameEnd(value) {
            const nick = prompt("MISSION ACCOMPLISHED! Enter your code-name (3 chars):", "AAA") || "AAA";
            State.scores.unshift({ nickname: nick.substring(0, 3).toUpperCase(), date: new Date().toLocaleDateString(), playtime: Date.now() - State.startTime });
            localStorage.setItem('aaa_scores', JSON.stringify(State.scores));
            navigate('SCORE');
        }

        function renderOptions(parent) {
            parent.innerHTML = `
                <div class="h-full flex flex-col items-center justify-center space-y-20">
                    <div class="relative z-10 w-[1000px] space-y-16 bg-neutral-950/50 p-20 rounded-[4rem] border border-white/5">
                        <div class="text-center font-cinzel text-5xl tracking-[1em] text-white">CONFIG</div>
                        <div class="space-y-12">
                            <div class="flex justify-between items-center text-4xl font-serif px-10">
                                <span class="text-neutral-500">Language</span>
                                <div class="flex gap-4">
                                    ${['KO', 'EN', 'JP'].map(l => `<button class="px-8 py-3 border ${State.language === l ? 'border-red-600 bg-red-900/20 text-white' : 'border-white/10 text-neutral-600'} transition-all" onclick="window.setLang('${l}')">${l}</button>`).join('')}
                                </div>
                            </div>
                        </div>
                        <button class="w-full py-10 bg-neutral-900 hover:bg-red-900 text-3xl font-cinzel tracking-[0.5em] transition-all" onclick="window.navigateToMenu()">RETURN</button>
                    </div>
                </div>
             `;
            window.setLang = (l) => { State.language = l; render(); };
            window.navigateToMenu = () => navigate('MENU');
        }

        function renderScore(parent) {
            parent.innerHTML = `
                <div class="p-32 h-full flex flex-col">
                    <h2 class="text-9xl font-cinzel text-red-800 mb-20 tracking-tighter uppercase">Hall of Infamy</h2>
                    <div class="flex-1 overflow-y-auto pr-10 custom-scrollbar">
                        <table class="w-full text-left text-5xl font-cinzel">
                            <thead class="text-neutral-600 text-2xl uppercase tracking-[1em] border-b border-white/5">
                                <tr><th class="pb-10">CODE NAME</th><th class="pb-10">DATE</th></tr>
                            </thead>
                            <tbody>
                                ${State.scores.map(s => `<tr class="border-b border-white/5 hover:bg-white/5 transition-all"><td class="py-12 text-red-600">${s.nickname}</td><td class="text-neutral-400">${s.date}</td></tr>`).join('')}
                            </tbody>
                        </table>
                    </div>
                    <button class="mt-20 py-10 border border-white/10 hover:bg-white/5 text-4xl font-cinzel tracking-[1em] uppercase transition-all" onclick="window.navigateToMenu()">RETURN</button>
                </div>
            `;
            window.navigateToMenu = () => navigate('MENU');
        }

        function renderCredits(parent) { navigate('MENU'); }
        function renderExitConfirm(parent) { navigate('MENU'); }

        initGame();
    </script>
</body>

</html>
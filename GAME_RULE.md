# GAME RULE: 트리플 A의 유산 (The Legacy of the Triple A)

## 🎮 게임 개요
**제목:** The Legacy of the Triple A (트리플 A의 유산)
**장르:** 미스터리 / 퍼즐 / 비주얼 노벨
**플랫폼:** 웹 (HTML5/JS)
**컨셉:** 전설적인 도둑이 남긴 유서를 통해 시작되는 디지털 보물 찾기.

## 📝 스토리 시놉시스
**프롤로그: 죽어버린 자에게 온 초대장**
플레이어는 전설적인 도둑이자, 명화를 완벽한 모조품으로 바꿔치기했던 "AAA" (트리플 A)로부터 초대장을 받습니다. AAA는 사망했으며, 자신의 막대한 재산을 그가 남긴 수수께끼와 함정을 통과하여 찾아내는 사람에게 주겠다고 합니다.
이 초대장은 전 세계의 "지식인"들에게 도전장을 내미는 메시지입니다.

**챕터 1 핵심 단서:**
- **목표:** AAA의 집사 "Alucard(알루카드)"가 있는 장소를 찾아라.
- **힌트:** "1. Turn (돌려라)", "2. 나라이름 (소문자로)"
- **해답 로직:** Alucard를 거꾸로(Turn) 읽으면 Dracula(드라큘라)가 됩니다. 드라큘라는 **루마니아(romania)**와 관련이 깊습니다.

## 🕹️ 게임 메커니즘

### 1. 비주얼 노벨 인터페이스
- **대화 상자:** 텍스트 내러티브를 표시합니다.
- **진행 방식:** 클릭하거나 스페이스바/엔터 키를 눌러 텍스트를 진행합니다.
- **스킵/자동:** 기본적인 편의 기능을 제공합니다.

### 2. "주소창" 퍼즐 시스템
- **원작 컨셉:** URL 주소를 직접 수정하여 이동 (`index.htm` -> `answer.htm`).
- **웹 각색:** 게임 화면 내에 **가상의 브라우저 인터페이스** 또는 **시스템 명령 프롬프트**를 구현합니다.
- **상호작용:**
    - 특정 퍼즐 지점에서 스토리가 멈춥니다.
    - 플레이어는 입력 필드에 정답 "코드" 또는 "키워드"를 입력해야 합니다.
    - **정답:** 다음 장면으로 넘어가거나 챕터가 완료됩니다.
    - **오답:** 에러 메시지나 힌트가 출력됩니다 (게임 오버 조건이 있을 수 있으나, 일반적으로 재도전 가능).

## ⚙️ 개발 요구사항

### 콘텐츠 구조
- **프롤로그**: AAA의 초대장 텍스트 출력.
- **퍼즐 단계**: 집사 Alucard의 위치를 찾는 도전.
- **엔딩/전환**: "romania" 입력 시 성공 메시지 및 다음 단계 암시.

### 기술 스택
- **엔진:** 커스텀 경량 VN 엔진 (Vanilla JS).
- **렌더링:** HTML5 Canvas 또는 DOM 조작 위주.
- **스타일링:** 어둡고 미스터리한 분위기 (검은 배경, 타자기 효과 등).

### 디스플레이 및 해상도 (Resolution & Display)
- **기준 해상도:** Full HD (1920x1080).
- **반응형 동작:**
    - 웹페이지 크기에 맞춰 게임 화면 자동 스케일링 (확대/축소).
    - **Upscaling:** 4K 등 고해상도 모니터에서도 FHD 화면을 비율 유지하며 확대.
    - **Letterboxing:** 화면 비율이 16:9가 아닐 경우 남는 여백(가로 또는 세로)은 검은색(#000000)으로 처리.
    - **최적화:** 창 크기 조절 시 실시간 반응.

### 리소스
- **배경:** 편지, 집사, 지도 등을 나타내는 미니멀하거나 생성된 이미지.
- **오디오:** 미스터리한 배경 음악.

## 📅 챕터 1 흐름 (스크립트)
1.  **인트로**: "초대장" 텍스트가 표시됩니다.
    > "안녕하십니까. 이 편지를 받는 모든 분들께..."
2.  **배경 스토리**: 대도였던 과거와 모조품에 대한 이야기.
3.  **도전 과제**: "저의 집사 Alucard를 만나야겠죠."
4.  **입력**: 플레이어에게 정답 입력을 요구합니다.
    > 힌트: "1. Turn, 2. 나라이름(소문자로)"
5.  **해결**:
    - `romania` 입력 -> **성공**.
    - 그 외 입력 -> **실패**.

## 📊 데이터 테이블 구조 (Data Tables)

### 1. Main_Chapter_num (스크립트 연출 테이블)
게임의 흐름과 연출을 제어하는 메인 데이터 테이블입니다. 순차적으로 이벤트를 실행합니다.

| 필드명 (Key) | 설명 (Description) | 예시 (Example) |
| :--- | :--- | :--- |
| `id` | 고유 식별자 (Sequence ID) | `1001` |
| `type` | 이벤트 타입 (Event Type) | `DIALOGUE`, `CHAR_ENTER`, `BG_CHANGE`, `BGM_PLAY`, `CHOICE`, `WAIT` |
| `target` | 대상 객체 ID (캐릭터, 배경, 오디오 등) | `char_alucard`, `bg_mansion_hall` |
| `value` | 값 (대사 키, 파일 경로, 파라미터 등) | `prologue_001` (Loc Key), `left` (Position), `0.5` (Duration) |
| `next_id` | 다음 실행할 ID (비선형 진행 시 사용, 기본은 +1) | `1002` |
| `options` | 추가 옵션 (JSON 객체 형태 권장) | `{ "color": "#ff0000", "shake": true }` |

**주요 타입 정의:**
- **DIALOGUE:** 대사 출력 (`value` = Localization Key).
- **CHAR_ENTER/EXIT:** 캐릭터 등장/퇴장 (`target` = Character ID, `value` = Position).
- **CHAR_EXPRESSION:** 표정 변경 (`target` = Character ID, `value` = Image Path suffix).
- **BG_CHANGE:** 배경 변경 (`value` = Image Path).
- **BGM/SFX:** 오디오 재생.
- **WAIT:** 대기 (`value` = 초 단위 시간).
- **CHOICE:** 선택지 표시.

### 2. Localization (현지화 테이블)
다국어 지원을 위한 텍스트 데이터 테이블입니다. 국가별 언어를 인덱싱하여 관리합니다.

| 필드명 (Key) | 설명 (Description) |
| :--- | :--- |
| `key` | 텍스트 고유 ID (Main_Chapter의 `value`와 매핑) |
| `ko` | 한국어 텍스트 |
| `en` | 영어 텍스트 |
| `jp` | 일본어 텍스트 |
| ... | 그 외 국가 코드 |

**기능 요구사항:**
- **언어 감지:** IP 기반 Geo-location 또는 브라우저 언어 설정(`navigator.language`)을 확인하여 초기 언어 선택.
- **텍스트 렌더링:**
    - `\n`을 줄바꿈(`<br>`)으로 변환.
    - 웹 컬러 코드 지원 (예: `<span style="color:#FF0000">텍스트</span>`).
    - **보안(Security):** XSS 방지를 위해 허용된 태그(span, b, i 등) 외에는 이스케이프 또는 제거 처리. 스크립트 실행 방지.
